<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lunch Wheel üçΩÔ∏è</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header>
        <div class="header-left">
            <h1 title="üçΩÔ∏è Lunch Wheel">üçΩÔ∏è Lunch Wheel</h1>
            <div class="group-controls">
                <label class="sr-only" for="groupSelect">Group</label>
                <select id="groupSelect" aria-label="Group"></select>
                <button id="manageGroupBtn" class="secondary-btn" popovertarget="group-popover"
                    title="Manage Groups & Spots">
                    Groups &amp; Spots
                </button>
            </div>
        </div>
        <button id="spinBtn" class="spin-btn" title="Spin!">Spin!</button>
    </header>

    <div class="wheel-container">
        <div class="pointer">‚ñº</div>
        <div class="wheel" id="wheel">
            <!-- Generated dynamically by JS -->
        </div>
    </div>

    <div id="result-popover" popover>
        <h2>üéâ Today's Lunch Spot</h2>
        <p id="result-text" class="result-text"></p>
        <p class="result-subtitle">Enjoy your meal!</p>
        <button popovertarget="result-popover" popovertargetaction="hide">
            Got it!
        </button>
    </div>

    <div id="group-popover" popover>
        <h2>üë• Groups &amp; Spots</h2>

        <div class="form-row">
            <input id="newGroupName" type="text" placeholder="New group name" autocomplete="off" />
            <button id="createGroupBtn" class="secondary-btn">Create</button>
        </div>

        <hr class="divider" />

        <h3 class="popover-subtitle">Lunch spots for <span id="currentGroupLabel"></span></h3>

        <div class="form-row">
            <input id="newSpotName" type="text" placeholder="Spot name" autocomplete="off" />
            <input id="newSpotLocation" type="text" placeholder="Location (optional)" autocomplete="off" />
            <button id="addSpotBtn" class="secondary-btn">Add</button>
        </div>

        <ul id="spots-list" class="spots-list"></ul>

        <div class="form-row form-row-end">
            <button id="resetSpotsBtn" class="danger-btn">Reset to default</button>
            <button class="secondary-btn" popovertarget="group-popover" popovertargetaction="hide">Done</button>
        </div>
    </div>

    <aside class="history-panel">
        <details>
            <summary>üìÖ History</summary>
            <ul id="history-list"></ul>
        </details>
    </aside>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="app.js"></script>
</body>

</html>